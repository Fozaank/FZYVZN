---
const cookies = Astro.request.headers.get('cookie') || '';
const isAuthenticated = cookies.includes('site_auth=authenticated');

// Detect if user is in a Vercel session
const isVercelSession = import.meta.env.VERCEL && import.meta.env.VERCEL_ENV !== 'production';

// âœ… Redirect to homepage only if fully authenticated
if (isAuthenticated || isVercelSession) {
  Astro.redirect('/');
}
---

<html>
  <head>
    <title>Coming Soon</title>
  </head>
  <body>
    <h1>Website Under Construction</h1>
    <form action="/api/login" method="POST">
      <input type="password" name="password" placeholder="Enter Password" required />
      <button type="submit">Submit</button>
    </form>
  </body>
</html>
